<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        .group {
            border-style: solid;
            margin-top: 10px;
            padding: 10px;
        }

        .rule {
            margin-top: 20px;
            padding: 10px;
        }

        .scenario {
            background-color: rgb(218, 218, 218);
            margin-top: 10px;
            padding: 10px;
        }
    </style>
</head>

<body>

    <div class="container mt-3">


        <span id="spec"></span>

        <!--         <div class="input-group mt-3 mb-3">
            <select class="btn btn-primary" id="step-type">
                <option value="Dado que" selected>Dado que</option>
                <option value="E">E</option>
                <option value="Quando">Quando</option>
                <option value="Então">Então</option>
            </select>
            <input id="step-description" type="text" class="form-control" placeholder="descreva o step">
            <button type="button" class="btn btn-primary" onclick="incluir()">
                Incluir
            </button>
        </div> -->

    </div>

    <script>

        var testSpec = {
            testTitle: 'Cadastro de frases',
            testDescription: 'O sistema permite o cadastramento de frases',
            testRules: [
                {
                    ruleTitle: 'Usuario precisa estar logado',
                    ruleDecription: 'Para que seja possivel cadastrar uma frase o usuario precisa estar logado',
                    ruleScenarios: [
                        {
                            scenarioTitle: 'Cadastrar com usuario logado',
                            scenarioSteps: [
                                {
                                    stepType: 'Dado que',
                                    stepDescription: 'o usuario esteja logado'
                                },
                                {
                                    stepType: 'Quando',
                                    stepDescription: 'o usuario cadastrar uma frase'
                                },
                                {
                                    stepType: 'Então',
                                    stepDescription: 'o sistema retornará a msg de sucesso'
                                }
                            ]
                        },
                        {
                            scenarioTitle: 'Cadastrar sem usuario estar logado',
                            scenarioSteps: [
                                {
                                    stepType: 'Dado que',
                                    stepDescription: 'o usuario não esteja logado'
                                },
                                {
                                    stepType: 'Quando',
                                    stepDescription: 'o usuario cadastrar uma frase'
                                },
                                {
                                    stepType: 'Então',
                                    stepDescription: 'o sistema retornará a msg de erro'
                                }
                            ]
                        }
                    ]
                },
                {
                    ruleTitle: 'A frase precisa conter 1 a 30 caracteres',
                    ruleDecription: 'Para que seja possivel cadastrar uma frase, ela precisa ter entre 1 e 30 caracteres',
                    ruleScenarios: [
                        {
                            scenarioTitle: 'Cadastrar uma frase nula',
                            scenarioSteps: [
                                {
                                    stepType: 'Dado que',
                                    stepDescription: 'o usuario esteja logado'
                                },
                                {
                                    stepType: 'Quando',
                                    stepDescription: 'o usuario cadastrar uma frase nula'
                                },
                                {
                                    stepType: 'Então',
                                    stepDescription: 'o sistema retornará a msg de erro'
                                }
                            ]
                        },
                        {
                            scenarioTitle: 'Cadastrar uma frase vazia',
                            scenarioSteps: [
                                {
                                    stepType: 'Dado que',
                                    stepDescription: 'o usuario esteja logado'
                                },
                                {
                                    stepType: 'Quando',
                                    stepDescription: 'o usuario cadastrar uma frase vazia'
                                },
                                {
                                    stepType: 'Então',
                                    stepDescription: 'o sistema retornará a msg de erro'
                                }
                            ]
                        },
                        {
                            scenarioTitle: 'Cadastrar uma frase com mais de 30 caracteres',
                            scenarioSteps: [
                                {
                                    stepType: 'Dado que',
                                    stepDescription: 'o usuario esteja logado'
                                },
                                {
                                    stepType: 'Quando',
                                    stepDescription: 'o usuario cadastrar uma frase com mais de 30 caracteres'
                                },
                                {
                                    stepType: 'Então',
                                    stepDescription: 'o sistema retornará a msg de erro'
                                }
                            ]
                        }
                    ]
                }
            ]
        }

        var specHtml = tag(testSpec.testTitle, 'h1');
        specHtml += tag(testSpec.testDescription, 'p');

        testSpec.testRules.forEach(r => {
            specHtml += '<div class="rule">';
            specHtml += tag(r.ruleTitle, 'h2');
            specHtml += tag(r.ruleDecription, 'p');

            r.ruleScenarios.forEach(scenario => {
                specHtml += '<div class="scenario">';
                specHtml += tag(scenario.scenarioTitle, 'h3');

                scenario.scenarioSteps.forEach(step => {
                    specHtml += '<div class="step">';
                    specHtml += tag(step.stepType, 'b') + ' ' + step.stepDescription + '<br>';
                    specHtml += '</div>';
                })

                specHtml+= stepAddForm()

                specHtml += '</div>';
            })

            specHtml += '</div>';
        });

        document.getElementById('spec').innerHTML = specHtml;

        function tag(text, tag) {
            return '<' + tag + '>' + text + '</' + tag + '>';
        }

        //TODO: construir programaticamente
        function stepAddForm(){
            return '<div class="input-group mt-3 mb-3">' +
            '<select class="btn btn-primary" id="step-type">' +
            '    <option value="Dado que" selected>Dado que</option>' +
            '    <option value="E">E</option>' +
            '    <option value="Quando">Quando</option>' +
            '    <option value="Então">Então</option>' +
            '</select>' +
            '<input id="step-description" type="text" class="form-control" placeholder="descreva o step">' +
            '<button type="button" class="btn btn-primary" onclick="incluir()">' +
                '    Incluir' +
                '</button>' +
                '</div>'
        }

    </script>
</body>

</html>
